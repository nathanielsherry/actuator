#!/usr/bin/python3

import subprocess
import time
import sys

from actuator import log, parser, util


if __name__ == "__main__":
    log.level = log.LEVEL_INFO
    
    components = parser.parse_actuator_expression_shell(sys.argv[1:])
    tester = components['state']
    sink = components['sink']
    monitor = components['monitor']
    util.set_global('expression', components['expression'])
    
    try:
        monitor.start(tester, sink)
    except KeyboardInterrupt:
        pass
    
    
    util.run_shutdown_hooks()

